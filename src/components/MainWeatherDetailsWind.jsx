import { useEffect, useRef } from "react";
import "../assets/scss/components/wind.scss";

const COMPASS_16_DIRECTION_DEGREES = {
  W: 0,
  WNW: 22.5,
  NW: 45,
  NNW: 67.5,
  N: 90,
  NNE: 112.5,
  NE: 135,
  ENE: 157.5,
  E: 180,
  ESE: 202.5,
  SE: 225,
  SSE: 247.5,
  S: 270,
  SSW: 292.5,
  SW: 315,
  WSW: 337.5,
  W: 360,
};

export default function MainWeatherDetailsWind(props) {
  const compassArrowRef = useRef(null);

  useEffect(() => {
    compassArrowRef.current.style.transform = `translate(-50%, -50%) rotate(${
      COMPASS_16_DIRECTION_DEGREES[props.windDirection]
    }deg)`;
  });

  return (
    <div className="wind">
      <div className="wind__compass">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 158 155">
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M89 143.639C120.079 140.412 144.846 115.941 148.527 85H154.567C150.833 119.258 123.395 146.396 89 149.669V143.639ZM76 143.735C44.1186 140.905 18.657 115.745 15.3613 84H9.33131C12.6669 119.062 40.8026 146.894 76 149.757V143.735ZM89 10.3612C121.076 13.6913 146.43 39.6522 148.816 72H154.831C152.419 36.3367 124.393 7.6984 89 4.33124V10.3612ZM76 4.24301C40.4686 7.1336 12.1336 35.4686 9.24307 71H15.265C18.1241 38.7845 43.7845 13.1241 76 10.265V4.24301Z"
          />
          <path d="M87.2294 0V10.1818H84.5774L80.5256 4.3054H80.7294V10.1818H78V0H80.5256L84.2294 5.18182L84.2095 5.86648V0H87.2294Z" />
          <path d="M84.6894 147.36C84.6455 146.976 84.4498 146.678 84.1025 146.465C83.7596 146.248 83.2694 146.14 82.6319 146.14C82.2098 146.14 81.8581 146.184 81.5767 146.271C81.2954 146.358 81.0843 146.479 80.9436 146.632C80.803 146.782 80.7304 146.955 80.726 147.15C80.7172 147.311 80.7568 147.452 80.8447 147.574C80.9371 147.696 81.0689 147.804 81.2404 147.899C81.4163 147.989 81.6273 148.07 81.8735 148.139C82.1197 148.209 82.3967 148.27 82.7044 148.323L83.8651 148.532C84.5334 148.647 85.1225 148.801 85.6325 148.992C86.1469 149.184 86.5777 149.413 86.9251 149.678C87.2768 149.943 87.5428 150.248 87.723 150.594C87.9033 150.939 87.9956 151.326 88 151.755C87.9956 152.432 87.7802 153.013 87.3537 153.498C86.9273 153.983 86.3139 154.355 85.5138 154.613C84.718 154.871 83.7574 155 82.6319 155C81.502 155 80.5172 154.866 79.6775 154.597C78.8377 154.328 78.1849 153.92 77.7188 153.373C77.2528 152.825 77.0132 152.132 77 151.295H80.1259C80.1523 151.64 80.2688 151.928 80.4754 152.158C80.6821 152.389 80.9656 152.563 81.3261 152.682C81.691 152.8 82.1131 152.86 82.5923 152.86C83.032 152.86 83.4057 152.813 83.7134 152.718C84.0256 152.624 84.2652 152.493 84.4323 152.326C84.5993 152.158 84.6851 151.967 84.6894 151.75C84.6851 151.548 84.6059 151.375 84.452 151.232C84.2982 151.086 84.0608 150.96 83.7398 150.855C83.4233 150.747 83.0188 150.648 82.5264 150.557L81.1151 150.295C79.9456 150.083 79.0246 149.739 78.3519 149.265C77.6793 148.787 77.3451 148.141 77.3495 147.328C77.3451 146.665 77.5693 146.085 78.0222 145.586C78.475 145.087 79.1015 144.698 79.9017 144.419C80.7018 144.14 81.6141 144 82.6385 144C83.6849 144 84.5927 144.141 85.3621 144.424C86.1359 144.703 86.736 145.095 87.1625 145.601C87.5889 146.107 87.8066 146.693 87.8153 147.36H84.6894Z" />
          <path d="M3.5 83L0 72H2.83126L4.43064 78.5527H4.51863L6.34576 72H8.65424L10.4814 78.5673H10.5694L12.1739 72H15L11.5 83L9.5 83L7.54141 75.9355H7.45859L5 83H3.5Z" />
          <path d="M149.5 84L149.852 73H158V75.3418H152.278V77.2873H156.494V78.4973V79.5796H152.278V81.6615H158L157.964 84H149.5Z" />
        </svg>
        <div ref={compassArrowRef} className="wind__compass-arrow">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 108 22">
            <path d="M7 4H94L93.0926 11L94 18H7V4Z" />
            <path d="M0 11L10 0V22L0 11Z" />
            <path
              d="M105 11C105 14.3137 102.314 17 99 17C95.6863 17 93 14.3137 93 11C93 7.68629 95.6863 5 99 5C102.314 5 105 7.68629 105 11Z"
              strokeWidth="6"
            />
          </svg>
        </div>
        <div className="wind__speed">
          <span className="wind__speed-digits">{props.windSpeed}</span>
          <span className="wind__speed-type">km/h</span>
        </div>
      </div>
    </div>
  );
}
